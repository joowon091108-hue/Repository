<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>개 짱짱 쩌는 TRPG용 주사위</title>
    <style>
        body { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; background-color: #f8f9fa; font-family: 'Apple SD Gothic Neo', sans-serif; margin: 0; }
        h2 { color: #333; margin-top: 0; min-height: 1.5em; }
        #dice-container { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin: 20px; min-height: 100px; max-width: 500px; }
        .dice { width: 70px; height: 70px; background: white; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: bold; box-shadow: 0 4px 6px rgba(0,0,0,0.1); border: 2px solid #eee; }
        .controls { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); text-align: center; }
        .count-display { font-size: 1.1rem; margin-bottom: 15px; }
        button { padding: 12px 20px; font-size: 1rem; cursor: pointer; border: none; border-radius: 8px; transition: 0.2s; }
        .btn-adj { background-color: #e9ecef; color: #495057; font-weight: bold; width: 50px; }
        .btn-adj:hover { background-color: #dee2e6; }
        .btn-roll { background-color: #007bff; color: white; width: 100%; margin-top: 15px; font-weight: bold; }
        .btn-roll:hover { background-color: #0056b3; }
        .btn-roll:disabled { background-color: #ccc; cursor: not-allowed; }
        
        .rolling { animation: shake 0.4s ease-in-out; }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            20% { transform: translate(-1px, -2px) rotate(-5deg); }
            40% { transform: translate(-3px, 0px) rotate(5deg); }
            60% { transform: translate(3px, 2px) rotate(-5deg); }
            80% { transform: translate(1px, -1px) rotate(5deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }
    </style>
</head>
<body>

    <h2 id="result-text">나와라 주사위라고 외치세요</h2>

    <div id="dice-container"></div>

    <div class="controls">
        <div class="count-display">주사위: <span id="dice-count" style="color: #007bff; font-weight: bold;">1</span>개</div>
        <button class="btn-adj" onclick="changeCount(-1)">-</button>
        <button class="btn-adj" onclick="changeCount(1)">+</button>
        <br>
        <button id="roll-button" class="btn-roll" onclick="rollAll()">굴리기</button>
    </div>

    <script>
        let count = 1;
        const container = document.getElementById('dice-container');
        const countDisplay = document.getElementById('dice-count');
        const rollButton = document.getElementById('roll-button');
        const resultText = document.getElementById('result-text');

        window.onload = () => updateDice();

        function changeCount(n) {
            count += n;
            if (count < 1) count = 1;
            if (count > 12) count = 12;
            countDisplay.innerText = count;
            resultText.innerText = "나와라 주사위라고 외치세요"; // 개수 바꿀 때 문구 초기화
            updateDice();
        }

        function updateDice() {
            container.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const dice = document.createElement('div');
                dice.className = 'dice';
                dice.innerText = '?';
                container.appendChild(dice);
            }
        }

        function rollAll() {
            const diceElements = document.querySelectorAll('.dice');
            rollButton.disabled = true;
            let total = 0;
            let completed = 0;

            diceElements.forEach((dice) => {
                dice.classList.remove('rolling');
                void dice.offsetWidth; 
                dice.classList.add('rolling');
                
                setTimeout(() => {
                    const result = Math.floor(Math.random() * 6) + 1;
                    dice.innerText = result;
                    total += result;
                    completed++;
                    
                    if (completed === diceElements.length) {
                        rollButton.disabled = false;
                        resultText.innerText = "합계: " + total;
                    }
                }, 400);
            });
        }
    </script>
</body>
</html>
